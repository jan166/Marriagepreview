import React from 'react';

const HeartProgress = ({ answeredCount, totalQuestions }) => {
  const percentage = (answeredCount / totalQuestions) * 100;
  
  const getFilledSegments = () => {
    // Fill every 10% - so 10 segments total
    return Math.floor(percentage / 10);
  };

  const filledSegments = getFilledSegments();

  const getMessage = () => {
    if (percentage >= 90) return "Almost done! ğŸ‰";
    if (percentage >= 70) return "Great job! ğŸ’ª";
    if (percentage >= 50) return "Halfway! âœ¨";
    if (percentage >= 30) return "Keep going! ğŸŒŸ";
    if (percentage > 0) return "You got this! ğŸ’";
    return "Let's start! ğŸ’–";
  };

  return (
    <div className="flex items-center gap-3">
      <div className="relative w-12 h-12 md:w-14 md:h-14 flex-shrink-0">
        <svg viewBox="0 0 100 100" className="w-full h-full">
          <defs>
            <clipPath id="heartClip">
              <path d="M50,90 C50,90 10,60 10,40 C10,25 20,15 30,15 C40,15 45,20 50,30 C55,20 60,15 70,15 C80,15 90,25 90,40 C90,60 50,90 50,90 Z" />
            </clipPath>
          </defs>
          
          {/* Background heart (empty) */}
          <path
            d="M50,90 C50,90 10,60 10,40 C10,25 20,15 30,15 C40,15 45,20 50,30 C55,20 60,15 70,15 C80,15 90,25 90,40 C90,60 50,90 50,90 Z"
            fill="none"
            stroke="#e5e7eb"
            strokeWidth="3"
          />
          
          {/* Filled sections - 10 segments */}
          <g clipPath="url(#heartClip)">
            {Array.from({ length: 10 }, (_, i) => (
              <rect
                key={i}
                x="0"
                y={90 - (i + 1) * 9}
                width="100"
                height="9"
                fill={filledSegments > i ? "#ec4899" : "#f3f4f6"}
                className="transition-all duration-500"
              />
            ))}
          </g>
          
          {/* Heart outline */}
          <path
            d="M50,90 C50,90 10,60 10,40 C10,25 20,15 30,15 C40,15 45,20 50,30 C55,20 60,15 70,15 C80,15 90,25 90,40 C90,60 50,90 50,90 Z"
            fill="none"
            stroke="#ec4899"
            strokeWidth="3"
          />
        </svg>
      </div>
      <div className="bg-white/95 backdrop-blur-sm px-3 py-1.5 rounded-full shadow-sm border border-pink-200">
        <span className="text-xs md:text-sm font-medium text-gray-700 whitespace-nowrap">
          {getMessage()}
        </span>
      </div>
    </div>
  );
};

export default HeartProgress;
